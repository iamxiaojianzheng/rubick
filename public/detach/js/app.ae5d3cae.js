(function(){"use strict";var e={106:function(e,n,t){var i=t(751),o=t(641),r=t(33),a=t(953),c=t(858),u=t.n(c);const l={class:"info"},s=["src"],d=["value","placeholder"],v={key:1},p={class:"handle-container"},f={class:"handle"},m=["title"],h={key:0,class:"window-handle"};var w={__name:"App",setup(e){const{ipcRenderer:n}=window.require("electron"),t=window.require("process"),i=(0,a.KR)(!1),c=localStorage.getItem("rubick-system-detach")||"{}",w=(0,a.KR)({});window.initDetach=e=>{const{subInput:n}=e;w.value=e,w.value.pin=!1,i.value=n&&(!!n.value||!!n.placeholder),localStorage.setItem("rubick-system-detach",JSON.stringify(e))};const g=(0,o.EW)(()=>{const{pin:e}=w.value;return!0===e});try{window.initDetach(JSON.parse(c))}catch(O){}const y=u()(e=>{n.send("msg-trigger",{type:"detachInputChange",data:{text:e.target.value}})},500),k=()=>{n.send("msg-trigger",{type:"openPluginDevTools"})},b=()=>{console.log("pin");const{pin:e}=w.value;e?n.send("detach:service",{type:"unpin"}):n.send("detach:service",{type:"pin"}),w.value.pin=!e},L=()=>{n.send("detach:service",{type:"minimize"})},x=()=>{n.send("detach:service",{type:"maximize"})},C=()=>{n.send("detach:service",{type:"close"})};return Object.assign(window,{setSubInputValue:({value:e})=>{w.value.subInput.value=e},setSubInput:e=>{w.value.subInput.placeholder=e},removeSubInput:()=>{w.value.subInput=null}}),window.enterFullScreenTrigger=()=>{document.querySelector(".detach").classList.remove("darwin")},window.leaveFullScreenTrigger=()=>{const e=document.querySelector(".detach");e.classList.contains("darwin")||e.classList.add("darwin")},window.maximizeTrigger=()=>{const e=document.querySelector(".maximize");e&&!e.classList.contains("unmaximize")&&e.classList.add("unmaximize")},window.unmaximizeTrigger=()=>{const e=document.querySelector(".maximize");e&&e.classList.remove("unmaximize")},"darwin"===t.platform?window.onkeydown=e=>{"Escape"!==e.code?!e.metaKey||"KeyW"!==e.code&&"KeyQ"!==e.code||window.handle.close():n.send("detach:service",{type:"endFullScreen"})}:window.onkeydown=e=>{e.ctrlKey&&"KeyW"===e.code&&window.handle.close()},(e,n)=>((0,o.uX)(),(0,o.CE)("div",{class:(0,r.C4)([(0,a.R1)(t).platform,"detach"])},[(0,o.Lk)("div",l,[(0,o.Lk)("img",{src:w.value.logo},null,8,s),i.value?((0,o.uX)(),(0,o.CE)("input",{key:0,autofocus:"",onInput:n[0]||(n[0]=(...e)=>(0,a.R1)(y)&&(0,a.R1)(y)(...e)),value:w.value.subInput?.value,placeholder:w.value.subInput?.placeholder},null,40,d)):((0,o.uX)(),(0,o.CE)("span",v,(0,r.v_)(w.value.pluginName),1))]),(0,o.Lk)("div",p,[(0,o.Lk)("div",f,[(0,o.Lk)("div",{class:"devtool",onClick:k,title:"开发者工具"}),(0,o.Lk)("div",{class:(0,r.C4)(g.value?"pin":"unpin"),onClick:b,title:g.value?"取消置顶":"置顶"},null,10,m)]),"darwin"!==(0,a.R1)(t).platform?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",{class:"minimize",onClick:L}),(0,o.Lk)("div",{class:"maximize",onClick:x}),(0,o.Lk)("div",{class:"close",onClick:C})])):(0,o.Q3)("",!0)])],2))}};const g=w;var y=g;(0,i.Ef)(y).mount("#app")}},n={};function t(i){var o=n[i];if(void 0!==o)return o.exports;var r=n[i]={exports:{}};return e[i](r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,i,o,r){if(!i){var a=1/0;for(s=0;s<e.length;s++){i=e[s][0],o=e[s][1],r=e[s][2];for(var c=!0,u=0;u<i.length;u++)(!1&r||a>=r)&&Object.keys(t.O).every(function(e){return t.O[e](i[u])})?i.splice(u--,1):(c=!1,r<a&&(a=r));if(c){e.splice(s--,1);var l=o();void 0!==l&&(n=l)}}return n}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[i,o,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,i){var o,r,a=i[0],c=i[1],u=i[2],l=0;if(a.some(function(n){return 0!==e[n]})){for(o in c)t.o(c,o)&&(t.m[o]=c[o]);if(u)var s=u(t)}for(n&&n(i);l<a.length;l++)r=a[l],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(s)},i=self["webpackChunkdetach"]=self["webpackChunkdetach"]||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}();var i=t.O(void 0,[504],function(){return t(106)});i=t.O(i)})();