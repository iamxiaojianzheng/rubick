(function(){"use strict";var e={444:function(e,n,t){var i=t(5),r=t(851),o=t(111),a=t(499),c=t(476),u=t.n(c);const l={class:"info"},s=["src"],d=["value","placeholder"],v={key:1},p={class:"handle-container"},f={class:"handle"},m=["title"],h={key:0,class:"window-handle"};var w={__name:"App",setup(e){const{ipcRenderer:n}=window.require("electron"),t=window.require("process"),i=(0,a.KR)(!1),c=(0,a.KR)(!1),w=localStorage.getItem("rubick-system-detach")||"{}",g=(0,a.KR)({});window.initDetach=e=>{const{subInput:t}=e;g.value=e,g.value.pin=!1,i.value=t&&(!!t.value||!!t.placeholder),localStorage.setItem("rubick-system-detach",JSON.stringify(e)),c.value=!0===n.sendSync("msg-trigger",{type:"isDev"})};const y=(0,r.EW)(()=>{const{pin:e}=g.value;return!0===e});try{window.initDetach(JSON.parse(w))}catch(O){}const k=u()(e=>{n.send("msg-trigger",{type:"detachInputChange",data:{text:e.target.value}})},500),b=()=>{n.send("msg-trigger",{type:"openPluginDevTools"})},C=()=>{console.log("pin");const{pin:e}=g.value;e?n.send("detach:service",{type:"unpin"}):n.send("detach:service",{type:"pin"}),g.value.pin=!e},S=()=>{n.send("detach:service",{type:"minimize"})},x=()=>{n.send("detach:service",{type:"maximize"})},L=()=>{n.send("detach:service",{type:"close"})};return Object.assign(window,{setSubInputValue:({value:e})=>{g.value.subInput.value=e},setSubInput:e=>{g.value.subInput.placeholder=e},removeSubInput:()=>{g.value.subInput=null}}),window.enterFullScreenTrigger=()=>{document.querySelector(".detach").classList.remove("darwin")},window.leaveFullScreenTrigger=()=>{const e=document.querySelector(".detach");e.classList.contains("darwin")||e.classList.add("darwin")},window.maximizeTrigger=()=>{const e=document.querySelector(".maximize");e&&!e.classList.contains("unmaximize")&&e.classList.add("unmaximize")},window.unmaximizeTrigger=()=>{const e=document.querySelector(".maximize");e&&e.classList.remove("unmaximize")},"darwin"===t.platform?window.onkeydown=e=>{"Escape"!==e.code?!e.metaKey||"KeyW"!==e.code&&"KeyQ"!==e.code||window.handle.close():n.send("detach:service",{type:"endFullScreen"})}:window.onkeydown=e=>{e.ctrlKey&&"KeyW"===e.code&&window.handle.close()},(e,n)=>((0,r.uX)(),(0,r.CE)("div",{class:(0,o.C4)([(0,a.R1)(t).platform,"detach"])},[(0,r.Lk)("div",l,[(0,r.Lk)("img",{src:g.value.logo},null,8,s),i.value?((0,r.uX)(),(0,r.CE)("input",{key:0,autofocus:"",onInput:n[0]||(n[0]=(...e)=>(0,a.R1)(k)&&(0,a.R1)(k)(...e)),value:g.value.subInput?.value,placeholder:g.value.subInput?.placeholder},null,40,d)):((0,r.uX)(),(0,r.CE)("span",v,(0,o.v_)(g.value.pluginName),1))]),(0,r.Lk)("div",p,[(0,r.Lk)("div",f,[c.value?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"devtool",onClick:b,title:"开发者工具"})):(0,r.Q3)("",!0),(0,r.Lk)("div",{class:(0,o.C4)(y.value?"pin":"unpin"),onClick:C,title:y.value?"取消置顶":"置顶"},null,10,m)]),"darwin"!==(0,a.R1)(t).platform?((0,r.uX)(),(0,r.CE)("div",h,[(0,r.Lk)("div",{class:"minimize",onClick:S}),(0,r.Lk)("div",{class:"maximize",onClick:x}),(0,r.Lk)("div",{class:"close",onClick:L})])):(0,r.Q3)("",!0)])],2))}};const g=w;var y=g;(0,i.Ef)(y).mount("#app")}},n={};function t(i){var r=n[i];if(void 0!==r)return r.exports;var o=n[i]={exports:{}};return e[i](o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(n,i,r,o){if(!i){var a=1/0;for(s=0;s<e.length;s++){i=e[s][0],r=e[s][1],o=e[s][2];for(var c=!0,u=0;u<i.length;u++)(!1&o||a>=o)&&Object.keys(t.O).every(function(e){return t.O[e](i[u])})?i.splice(u--,1):(c=!1,o<a&&(a=o));if(c){e.splice(s--,1);var l=r();void 0!==l&&(n=l)}}return n}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[i,r,o]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,i){var r,o,a=i[0],c=i[1],u=i[2],l=0;if(a.some(function(n){return 0!==e[n]})){for(r in c)t.o(c,r)&&(t.m[r]=c[r]);if(u)var s=u(t)}for(n&&n(i);l<a.length;l++)o=a[l],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(s)},i=self["webpackChunkdetach"]=self["webpackChunkdetach"]||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}();var i=t.O(void 0,[504],function(){return t(444)});i=t.O(i)})();